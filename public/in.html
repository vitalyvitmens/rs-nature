<!DOCTYPE html>
<html>
  <head>
    <style>
      @font-face {
        font-family: 'Roboto';
        src: url('./fonts/Roboto-Regular.ttf') format('truetype');
      }

      * {
        padding: 0;
        margin: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'Roboto', sans-serif;
        max-width: 960px;
        margin: 1rem auto;
        background: url('../src/assets/summer-bg.jpg');
        background-size: cover;
        background-attachment: fixed;
      }

      h1 {
        text-align: center;
        color: rgb(230, 107, 25);
        font-size: 3rem;
      }

      .buttons {
        display: flex;
        width: 70%;
        margin: 1rem auto;
      }

      button {
        width: 200px;
        height: 200px;
        margin: 0.5rem auto;
        padding: 0.5rem;
        border: 2px solid rgb(207, 190, 190);
        border-radius: 20px;
      }

      button:hover {
        opacity: 0.75;
        cursor: pointer;
        transform: translateY(-2px);
      }

      button:active {
        opacity: 0.5;
        border: 2px solid green;
        color: green;
      }

      #sun-button {
        background: url(../src/assets/summer-bg.jpg);
        background-size: cover;
      }

      #rain-button {
        background: url(../src/assets/rainy-bg.jpg);
        background-size: cover;
      }

      #snow-button {
        background: url(../src/assets/winter-bg.jpg);
        background-size: cover;
      }

      button.active {
        border: 2px solid red;
      }

      .slider {
        display: flex;
        flex-direction: column;
        margin: auto;
        width: 140px;
      }

      #sun {
        margin: auto;
        width: 50px;
        height: 50px;
        background: url(../src/assets/icons/sun.svg);
        background-size: cover;
      }

      #rain {
        margin: auto;
        width: 50px;
        height: 50px;
        background: url(../src/assets/icons/cloud-rain.svg);
        background-size: cover;
      }

      #snow {
        margin: auto;
        width: 50px;
        height: 50px;
        background: url(../src/assets/icons/cloud-snow.svg);
        background-size: cover;
      }
    </style>
  </head>
  <body>
    <h1>Weather sounds</h1>

    <div class="buttons">
      <button id="sun-button"><div id="sun"></div></button>
      <button id="rain-button"><div id="rain"></div></button>
      <button id="snow-button"><div id="snow"></div></button>
    </div>

    <div class="slider">
      <input
        type="range"
        id="volume"
        name="volume"
        min="0"
        max="1"
        step="0.05"
      />
    </div>

    <script>
      const volumeSlider = document.getElementById('volume')

      const sunButton = document.getElementById('sun-button')
      const rainButton = document.getElementById('rain-button')
      const snowButton = document.getElementById('snow-button')

      const sunIcon = document.getElementById('sun')
      const rainIcon = document.getElementById('rain')
      const snowIcon = document.getElementById('snow')

      const urlSunIcon = "url('../src/assets/icons/sun.svg')"
      const urlRainIcon = "url('../src/assets/icons/cloud-rain.svg')"
      const urlSnowIcon = "url('../src/assets/icons/cloud-snow.svg')"
      const urlPauseIcon = "url('../src/assets/icons/pause.svg')"

      const body = document.body

      const changeBackground = (button, image) => {
        sunButton.classList.remove('active')
        rainButton.classList.remove('active')
        snowButton.classList.remove('active')
        button.classList.add('active')
        body.style.backgroundImage = `url(${image})`
      }

      let index = 0

      const toggleCurrentIconOrPauseIcon = (el, arrTwoImages) => {
        index = (index + 1) % arrTwoImages.length
        el.style.backgroundImage = arrTwoImages[index]
      }

      sunButton.addEventListener('click', () => {
        rainIcon.style.backgroundImage = urlRainIcon
        snowIcon.style.backgroundImage = urlSnowIcon

        toggleCurrentIconOrPauseIcon(sunIcon, [urlPauseIcon, urlSunIcon])

        changeBackground(sunButton, '../src/assets/summer-bg.jpg')
        playOrPauseAudio(sunAudio)
      })

      rainButton.addEventListener('click', () => {
        sunIcon.style.backgroundImage = urlSunIcon
        snowIcon.style.backgroundImage = urlSnowIcon

        toggleCurrentIconOrPauseIcon(rainIcon, [urlPauseIcon, urlRainIcon])

        changeBackground(rainButton, '../src/assets/rainy-bg.jpg')
        playOrPauseAudio(rainAudio)
      })

      snowButton.addEventListener('click', () => {
        sunIcon.style.backgroundImage = urlSunIcon
        rainIcon.style.backgroundImage = urlRainIcon

        toggleCurrentIconOrPauseIcon(snowIcon, [urlPauseIcon, urlSnowIcon])

        changeBackground(snowButton, '../src/assets/winter-bg.jpg')
        playOrPauseAudio(snowAudio)
      })

      const sunAudio = new Audio('../src/assets/sounds/summer.mp3')
      const rainAudio = new Audio('../src/assets/sounds/rain.mp3')
      const snowAudio = new Audio('../src/assets/sounds/winter.mp3')

      const allAudio = [sunAudio, rainAudio, snowAudio]

      const stopAllAudio = () => allAudio.forEach((audio) => audio.pause())

      const setVolumeAllAudio = (value) =>
        allAudio.forEach((audio) => (audio.volume = value))

      const playOrPauseAudio = (audio) => {
        if (audio.paused) {
          stopAllAudio()
          audio.play()
        } else {
          audio.pause()
        }
      }

      volumeSlider.addEventListener('input', () =>
        setVolumeAllAudio(volumeSlider.value)
      )
    </script>
  </body>
</html>
